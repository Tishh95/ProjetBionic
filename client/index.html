<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>bionic</title>
    <link rel="stylesheet" href="./css/index.css">
</head>
<body  onload="fill()">

<div class="flex-container">

    <div id="tabNotes" class="flex-child">
        Your notes
        <a href='create.html' style="float: right"> Create</a>

    </div>

    <div id="tabClubs" class="flex-child-two">
        Your Clubs
        <a href='create.html' style="float: right"> créer un club</a>
    </div>

</div>

<script src="./js/custom.js"></script>
<script src='./js/jquery-2.1.3.js'></script>

<script>
    function fill(){
        let user_id = 3
        console.log('appel à la fonction fill()...')
        callWebService("/users/user/note/" + user_id  ,null,notesOk, null, 'GET',1)
    }
    function notesOk(data, idx){
        gNotes= data
        console.log('Retour Web Service cities')
        let addNotes = ' ', bk = ''
        for (k in data.notes) {
            console.log(data)
            addNotes += '<div class="divNotes"> ' +
                '<td ><a  onclick="displayOneNote('+k+')">'+data.notes[k].title+'</td>' +
                '</br>' +
                '<td>'+data.notes[k].note+'</td>' +
                '</div></a>' ;
        }
        if(data.clubs.length > 0) {
            clubOk(data.clubs)
        }
        document.getElementById('tabNotes').innerHTML += addNotes;

    }

    function clubOk(data) {
        let addClub = ' '
        for ( key in data ){
            gClubs= data
            let club = data[key] ;
            console.log(club)
            addClub += '<div class="divNotes"> ' +
                '<td >'+club.name+'</td>' +
                '</br>' +
                '<td><a  onclick="displayOneClub('+key+')">'+club.creationDate+'</a></td>' +
                '</div>' ;
        }
        document.getElementById('tabClubs').innerHTML += addClub;
    }

    function displayOneClub(id) {
        console.log('display')
        let club = gClubs[key];
        putProp('club',club,true)
        post('club.html')
    }
    function displayOneNote(id) {
        console.log('display')
        let note = gNotes[key];
        putProp('note',note,true)
        post('create.html')
    }




</script>
</body>
</html>