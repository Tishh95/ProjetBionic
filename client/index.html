<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>bionic</title>
    <link rel="stylesheet" href="./css/index.css">
</head>
<body  onload="fill()">

<div class="flex-container">

    <div id="tabNotes" class="flex-child">
        Your notes
        <a href='create.html' style="float: right"> Create</a>

    </div>

    <div id="tabClubs" class="flex-child-two">
        Your Clubs
    </div>

</div>

<script src="./js/custom.js"></script>
<script src='./js/jquery-2.1.3.js'></script>

<script>
    let user_id
    function fill(){
        let gClubs
        console.log('appel Ã  la fonction fill()...')
        user_id = 3
        callWebService("/notes/list",null,notesOk, null, 'GET',1)
        callWebService("/clubs/list",null,clubOk, null, 'GET',1)
    }
    function clubOk(data, idx) {
        let addClub = ' '
        for ( key in data ){
            gClubs= data
            let club = data[key] ;
            console.log(club)
            addClub += '<div class="divNotes"> ' +
                '<td >'+club.name+'</td>' +
                '</br>' +
                '<td><a  onclick="displayOneClub('+key+')">'+club.creationDate+'</a></td>' +
                '</div>' ;
        }
        document.getElementById('tabClubs').innerHTML += addClub;
    }

    function displayOneClub(id) {
        console.log('display')
        let club = gClubs[key];
        putProp('club',club,true)
        post('club.html')
    }



    function notesOk(data, idx){
        console.log('Retour Web Service cities')
        console.log(data)

        let line = ' ', bk = ''
        for ( key in data ){
                let city = data[key] ;
                line += '<div class="divNotes"> ' +
                    '<td class="itemsTitle">'+city.title+'</td>' +
                    '</br>' +
                    '<td><a  onclick="displayOneCity('+key+')">'+city.note+'</a></td>' +
                    '</div>' ;
        }
        document.getElementById('tabNotes').innerHTML += line;

    }
</script>
</body>
</html>